/**
   * Create By Dika Ardnt.
   * Contact Me on wa.me/6288292024190
   * Follow https://github.com/DikaArdnt
*/



/*

    • Jangan lupa Folow github yang punya base yo
    • Folow juga github saya https://github.com/Haikalbotz
    • Subscribe juga Youtube saya MORISHIMA OFC
    • Harga Sc No enc 100% : 35.000
    • https://wa.me/6289609927539
*/                                                                                                  /*
/*                                                                                                  /*
*/                                                                                                  /*
/*                                                                                                  /*
*/                                                                                                  /*
/*                                                                                                  /*
*/                                                                                                  /*
/*                                                                                                  /*
*/                                                                                                  /*
/*                                                                                                  /*
*/                                                                                                  /*
                                          THANK YOU 💌
><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><>
*/
/*                                     SCROL AJA NGAB !!!
   !                   
     !             
        !
          !
             !
                !
                   !
                     !
                       !
                         !
                            !
                               !
                                  !
                                     !
LANJUT NGAB !!!                     !
                                     !
                                  !
                               !
                            !
                         !
                      !
                   !
                !
             !
          !
       !
    !
  !
                                     
                                  
                     
               
  !        !       !!       !     !    !        !!       !
  !        !      !  !      !     !   !        ! !       !
  !        !     !    !     !     !  !        !   !      !
  --------------     !     !    !      ! !       !      !    !
  !        !    !----------!    !     ! !       !-----------!    !
  !        !   !        !   !     !  !     !         !   !
  !        !  !          !  !     !   !   !           !  !---------------
  
  !        !       !!       !     !    !        !!       !
  !        !      !  !      !     !   !        ! !       !
  !        !     !    !     !     !  !        !   !      !
  --------------     !     !    !      ! !       !      !    !
  !        !    !----------!    !     ! !       !-----------!    !
  !        !   !        !   !     !  !     !         !   !
  !        !  !          !  !     !   !   !           !  !---------------
  

  !        !       !!       !     !    !        !!       !
  !        !      !  !      !     !   !        ! !       !
  !        !     !    !     !     !  !        !   !      !
  --------------     !     !    !      ! !       !      !    !
  !        !    !----------!    !     ! !       !-----------!    !
  !        !   !        !   !     !  !     !         !   !
  !        !  !          !  !     !   !   !           !  !---------------
  
  !        !       !!       !     !    !        !!       !
  !        !      !  !      !     !   !        ! !       !
  !        !     !    !     !     !  !        !   !      !
  --------------     !     !    !      ! !       !      !    !
  !        !    !----------!    !     ! !       !-----------!    !
  !        !   !        !   !     !  !     !         !   !
  !        !  !          !  !     !   !   !           !  !---------------
  
  !        !       !!       !     !    !        !!       !
  !        !      !  !      !     !   !        ! !       !
  !        !     !    !     !     !  !        !   !      !
  --------------     !     !    !      ! !       !      !    !
  !        !    !----------!    !     ! !       !-----------!    !
  !        !   !        !   !     !  !     !         !   !
  !        !  !          !  !     !   !   !           !  !---------------
  

   ! 
     !
        !
          !
             !
                !
                   !
                     !
                       !
                         !
                            !
                               !
                                  !
                                     !
LANJUT NGAB !!!                     !
                                     !
                                  !
                               !
                            !
                         !
                      !
                   !
                !
             !
          !
       !
    !
  !
                                     
                                  
                     
               
  !        !       !!       !     !    !        !!       !
  !        !      !  !      !     !   !        ! !       !
  !        !     !    !     !     !  !        !   !      !
  --------------     !     !    !      ! !       !      !    !
  !        !    !----------!    !     ! !       !-----------!    !
  !        !   !        !   !     !  !     !         !   !
  !        !  !          !  !     !   !   !           !  !---------------
  
  !        !       !!       !     !    !        !!       !
  !        !      !  !      !     !   !        ! !       !
  !        !     !    !     !     !  !        !   !      !
  --------------     !     !    !      ! !       !      !    !
  !        !    !----------!    !     ! !       !-----------!    !
  !        !   !        !   !     !  !     !         !   !
  !        !  !          !  !     !   !   !           !  !---------------
  

  !        !       !!       !     !    !        !!       !
  !        !      !  !      !     !   !        ! !       !
  !        !     !    !     !     !  !        !   !      !
  --------------     !     !    !      ! !       !      !    !
  !        !    !----------!    !     ! !       !-----------!    !
  !        !   !        !   !     !  !     !         !   !
  !        !  !          !  !     !   !   !           !  !---------------
  
  !        !       !!       !     !    !        !!       !
  !        !      !  !      !     !   !        ! !       !
  !        !     !    !     !     !  !        !   !      !
  --------------     !     !    !      ! !       !      !    !
  !        !    !----------!    !     ! !       !-----------!    !
  !        !   !        !   !     !  !     !         !   !
  !        !  !          !  !     !   !   !           !  !---------------
  
  !        !       !!       !     !    !        !!       !
  !        !      !  !      !     !   !        ! !       !
  !        !     !    !     !     !  !        !   !      !
  --------------     !     !    !      ! !       !      !    !
  !        !    !----------!    !     ! !       !-----------!    !
  !        !   !        !   !     !  !     !         !   !
  !        !  !          !  !     !   !   !           !  !---------------
  
  
  
  
     ! 
     !
        !
          !
             !
                !
                   !
                     !
                       !
                         !
                            !
                               !
                                  !
                                     !
LANJUT NGAB !!!                     !
                                     !      SCROLL TROSSSS !!
                                  !
                               !
                            !
                         !
                      !
                   !
                !
             !
          !
       !
    !
  !
                                     
                                  
                     
               
  !        !       !!       !     !    !        !!       !
  !        !      !  !      !     !   !        ! !       !
  !        !     !    !     !     !  !        !   !      !
  --------------     !     !    !      ! !       !      !    !
  !        !    !----------!    !     ! !       !-----------!    !
  !        !   !        !   !     !  !     !         !   !
  !        !  !          !  !     !   !   !           !  !---------------
  
  !        !       !!       !     !    !        !!       !
  !        !      !  !      !     !   !        ! !       !
  !        !     !    !     !     !  !        !   !      !
  --------------     !     !    !      ! !       !      !    !
  !        !    !----------!    !     ! !       !-----------!    !
  !        !   !        !   !     !  !     !         !   !
  !        !  !          !  !     !   !   !           !  !---------------
  

  !        !       !!       !     !    !        !!       !
  !        !      !  !      !     !   !        ! !       !
  !        !     !    !     !     !  !        !   !      !
  --------------     !     !    !      ! !       !      !    !
  !        !    !----------!    !     ! !       !-----------!    !
  !        !   !        !   !     !  !     !         !   !
  !        !  !          !  !     !   !   !           !  !---------------
  
  !        !       !!       !     !    !        !!       !
  !        !      !  !      !     !   !        ! !       !
  !        !     !    !     !     !  !        !   !      !
  --------------     !     !    !      ! !       !      !    !
  !        !    !----------!    !     ! !       !-----------!    !
  !        !   !        !   !     !  !     !         !   !
  !        !  !          !  !     !   !   !           !  !---------------
  
  !        !       !!       !     !    !        !!       !
  !        !      !  !      !     !   !        ! !       !
  !        !     !    !     !     !  !        !   !      !
  --------------     !     !    !      ! !       !      !    !
  !        !    !----------!    !     ! !       !-----------!    !
  !        !   !        !   !     !  !     !         !   !
  !        !  !          !  !     !   !   !           !  !---------------
  
  
  
     ! 
     !
        !
          !
             !
                !
                   !
                     !
                       !
                         !
                            !
                               !
                                  !
                                     !
LANJUT NGAB !!!                     !
                                     !
                                  !
                               !
                            !
                         !
                      !
                   !
                !
             !
          !
       !
    !
  !
                                     
                                  
                     
               
  !        !       !!       !     !    !        !!       !
  !        !      !  !      !     !   !        ! !       !
  !        !     !    !     !     !  !        !   !      !
  --------------     !     !    !      ! !       !      !    !
  !        !    !----------!    !     ! !       !-----------!    !
  !        !   !        !   !     !  !     !         !   !
  !        !  !          !  !     !   !   !           !  !---------------
  
  !        !       !!       !     !    !        !!       !
  !        !      !  !      !     !   !        ! !       !
  !        !     !    !     !     !  !        !   !      !
  --------------     !     !    !      ! !       !      !    !
  !        !    !----------!    !     ! !       !-----------!    !
  !        !   !        !   !     !  !     !         !   !
  !        !  !          !  !     !   !   !           !  !---------------
  

  !        !       !!       !     !    !        !!       !
  !        !      !  !      !     !   !        ! !       !
  !        !     !    !     !     !  !        !   !      !
  --------------     !     !    !      ! !       !      !    !
  !        !    !----------!    !     ! !       !-----------!    !
  !        !   !        !   !     !  !     !         !   !
  !        !  !          !  !     !   !   !           !  !---------------
  
  !        !       !!       !     !    !        !!       !
  !        !      !  !      !     !   !        ! !       !
  !        !     !    !     !     !  !        !   !      !
  --------------     !     !    !      ! !       !      !    !
  !        !    !----------!    !     ! !       !-----------!    !
  !        !   !        !   !     !  !     !         !   !
  !        !  !          !  !     !   !   !           !  !---------------
  
  !        !       !!       !     !    !        !!       !
  !        !      !  !      !     !   !        ! !       !
  !        !     !    !     !     !  !        !   !      !
  --------------     !     !    !      ! !       !      !    !
  !        !    !----------!    !     ! !       !-----------!    !
  !        !   !        !   !     !  !     !         !   !
  !        !  !          !  !     !   !   !           !  !---------------
  
  
   ! 
     !
        !
          !
             !
                !
                   !
                     !
                       !
                         !
                            !
                               !
                                  !
                                     !
LANJUT NGAB !!!                     !
                                     !
                                  !
                               !
                            !
                         !
                      !
                   !
                !
             !
          !
       !
    !
  !
                                     
                                  
                     
               
  !        !       !!       !     !    !        !!       !
  !        !      !  !      !     !   !        ! !       !
  !        !     !    !     !     !  !        !   !      !
  --------------     !     !    !      ! !       !      !    !
  !        !    !----------!    !     ! !       !-----------!    !
  !        !   !        !   !     !  !     !         !   !
  !        !  !          !  !     !   !   !           !  !---------------
  
  !        !       !!       !     !    !        !!       !
  !        !      !  !      !     !   !        ! !       !
  !        !     !    !     !     !  !        !   !      !
  --------------     !     !    !      ! !       !      !    !
  !        !    !----------!    !     ! !       !-----------!    !
  !        !   !        !   !     !  !     !         !   !
  !        !  !          !  !     !   !   !           !  !---------------
  

  !        !       !!       !     !    !        !!       !
  !        !      !  !      !     !   !        ! !       !
  !        !     !    !     !     !  !        !   !      !
  --------------     !     !    !      ! !       !      !    !
  !        !    !----------!    !     ! !       !-----------!    !
  !        !   !        !   !     !  !     !         !   !
  !        !  !          !  !     !   !   !           !  !---------------
  
  !        !       !!       !     !    !        !!       !
  !        !      !  !      !     !   !        ! !       !
  !        !     !    !     !     !  !        !   !      !
  --------------     !     !    !      ! !       !      !    !
  !        !    !----------!    !     ! !       !-----------!    !
  !        !   !        !   !     !  !     !         !   !
  !        !  !          !  !     !   !   !           !  !---------------
  
  !        !       !!       !     !    !        !!       !
  !        !      !  !      !     !   !        ! !       !
  !        !     !    !     !     !  !        !   !      !
  --------------     !     !    !      ! !       !      !    !
  !        !    !----------!    !     ! !       !-----------!    !
  !        !   !        !   !     !  !     !         !   !
  !        !  !          !  !     !   !   !           !  !---------------


   ! 
     !
        !
          !
             !
                !
                   !
                     !
                       !
                         !
                            !
                               !
                                  !
                                     !
LANJUT NGAB !!!                     !
                                     !     DIKIT LAGI KOK !!
                                  !
                               !
                            !
                         !
                      !
                   !
                !
             !
          !
       !
    !
  !
                                     
                                  
                     
               
  !        !       !!       !     !    !        !!       !
  !        !      !  !      !     !   !        ! !       !
  !        !     !    !     !     !  !        !   !      !
  --------------     !     !    !      ! !       !      !    !
  !        !    !----------!    !     ! !       !-----------!    !
  !        !   !        !   !     !  !     !         !   !
  !        !  !          !  !     !   !   !           !  !---------------
  
  !        !       !!       !     !    !        !!       !
  !        !      !  !      !     !   !        ! !       !
  !        !     !    !     !     !  !        !   !      !
  --------------     !     !    !      ! !       !      !    !
  !        !    !----------!    !     ! !       !-----------!    !
  !        !   !        !   !     !  !     !         !   !
  !        !  !          !  !     !   !   !           !  !---------------
  

  !        !       !!       !     !    !        !!       !
  !        !      !  !      !     !   !        ! !       !
  !        !     !    !     !     !  !        !   !      !
  --------------     !     !    !      ! !       !      !    !
  !        !    !----------!    !     ! !       !-----------!    !
  !        !   !        !   !     !  !     !         !   !
  !        !  !          !  !     !   !   !           !  !---------------
  
  !        !       !!       !     !    !        !!       !
  !        !      !  !      !     !   !        ! !       !
  !        !     !    !     !     !  !        !   !      !
  --------------     !     !    !      ! !       !      !    !
  !        !    !----------!    !     ! !       !-----------!    !
  !        !   !        !   !     !  !     !         !   !
  !        !  !          !  !     !   !   !           !  !---------------
  
  !        !       !!       !     !    !        !!       !
  !        !      !  !      !     !   !        ! !       !
  !        !     !    !     !     !  !        !   !      !
  --------------     !     !    !      ! !       !      !    !
  !        !    !----------!    !     ! !       !-----------!    !
  !        !   !        !   !     !  !     !         !   !
  !        !  !          !  !     !   !   !           !  !---------------



   ! 
     !
        !
          !
             !
                !
                   !
                     !
                       !
                         !
                            !
                               !
                                  !
                                     !
LANJUT NGAB !!!                     !
                                     ! TROSSS !!!
                                  !
                               !
                            !
                         !
                      !
                   !
                !
             !
          !
       !
    !
  !
                                     
                                  
                     
               
  !        !       !!       !     !    !        !!       !
  !        !      !  !      !     !   !        ! !       !
  !        !     !    !     !     !  !        !   !      !
  --------------     !     !    !      ! !       !      !    !
  !        !    !----------!    !     ! !       !-----------!    !
  !        !   !        !   !     !  !     !         !   !
  !        !  !          !  !     !   !   !           !  !---------------
  
  !        !       !!       !     !    !        !!       !
  !        !      !  !      !     !   !        ! !       !
  !        !     !    !     !     !  !        !   !      !
  --------------     !     !    !      ! !       !      !    !
  !        !    !----------!    !     ! !       !-----------!    !
  !        !   !        !   !     !  !     !         !   !
  !        !  !          !  !     !   !   !           !  !---------------
  

  !        !       !!       !     !    !        !!       !
  !        !      !  !      !     !   !        ! !       !
  !        !     !    !     !     !  !        !   !      !
  --------------     !     !    !      ! !       !      !    !
  !        !    !----------!    !     ! !       !-----------!    !
  !        !   !        !   !     !  !     !         !   !
  !        !  !          !  !     !   !   !           !  !---------------
  
  !        !       !!       !     !    !        !!       !
  !        !      !  !      !     !   !        ! !       !
  !        !     !    !     !     !  !        !   !      !
  --------------     !     !    !      ! !       !      !    !
  !        !    !----------!    !     ! !       !-----------!    !
  !        !   !        !   !     !  !     !         !   !
  !        !  !          !  !     !   !   !           !  !---------------
  
  !        !       !!       !     !    !        !!       !
  !        !      !  !      !     !   !        ! !       !
  !        !     !    !     !     !  !        !   !      !
  --------------     !     !    !      ! !       !      !    !
  !        !    !----------!    !     ! !       !-----------!    !
  !        !   !        !   !     !  !     !         !   !
  !        !  !          !  !     !   !   !           !  !---------------



   ! 
     !
        !
          !
             !
                !
                   !
                     !
                       !
                         !
                            !
                               !
                                  !
                                     !
LANJUT NGAB !!!                     !
                                     !
                                  !
                               !
                            !
                         !
                      !
                   !
                !
             !
          !
       !
    !
  !
                                     
                                  
                     
               
  !        !       !!       !     !    !        !!       !
  !        !      !  !      !     !   !        ! !       !
  !        !     !    !     !     !  !        !   !      !
  --------------     !     !    !      ! !       !      !    !
  !        !    !----------!    !     ! !       !-----------!    !
  !        !   !        !   !     !  !     !         !   !
  !        !  !          !  !     !   !   !           !  !---------------
  
  !        !       !!       !     !    !        !!       !
  !        !      !  !      !     !   !        ! !       !
  !        !     !    !     !     !  !        !   !      !
  --------------     !     !    !      ! !       !      !    !
  !        !    !----------!    !     ! !       !-----------!    !
  !        !   !        !   !     !  !     !         !   !
  !        !  !          !  !     !   !   !           !  !---------------
  

  !        !       !!       !     !    !        !!       !
  !        !      !  !      !     !   !        ! !       !
  !        !     !    !     !     !  !        !   !      !
  --------------     !     !    !      ! !       !      !    !
  !        !    !----------!    !     ! !       !-----------!    !
  !        !   !        !   !     !  !     !         !   !
  !        !  !          !  !     !   !   !           !  !---------------
  
  !        !       !!       !     !    !        !!       !
  !        !      !  !      !     !   !        ! !       !
  !        !     !    !     !     !  !        !   !      !
  --------------     !     !    !      ! !       !      !    !
  !        !    !----------!    !     ! !       !-----------!    !
  !        !   !        !   !     !  !     !         !   !
  !        !  !          !  !     !   !   !           !  !---------------
  
  !        !       !!       !     !    !        !!       !
  !        !      !  !      !     !   !        ! !       !
  !        !     !    !     !     !  !        !   !      !
  --------------     !     !    !      ! !       !      !    !
  !        !    !----------!    !     ! !       !-----------!    !
  !        !   !        !   !     !  !     !         !   !
  !        !  !          !  !     !   !   !           !  !---------------

   ! 
     !
        !
          !
             !
                !
                   !
                     !
                       !
                         !
                            !
                               !
                                  !
                                     !
LANJUT NGAB !!!                     !
                                     !
                                  !
                               !
                            !
                         !
                      !
                   !
                !
             !
          !
       !
    !
  !
                                     
                                  
                     
               
  !        !       !!       !     !    !        !!       !
  !        !      !  !      !     !   !        ! !       !
  !        !     !    !     !     !  !        !   !      !
  --------------     !     !    !      ! !       !      !    !
  !        !    !----------!    !     ! !       !-----------!    !
  !        !   !        !   !     !  !     !         !   !
  !        !  !          !  !     !   !   !           !  !---------------
  
  !        !       !!       !     !    !        !!       !
  !        !      !  !      !     !   !        ! !       !
  !        !     !    !     !     !  !        !   !      !
  --------------     !     !    !      ! !       !      !    !
  !        !    !----------!    !     ! !       !-----------!    !
  !        !   !        !   !     !  !     !         !   !
  !        !  !          !  !     !   !   !           !  !---------------
  

  !        !       !!       !     !    !        !!       !
  !        !      !  !      !     !   !        ! !       !
  !        !     !    !     !     !  !        !   !      !
  --------------     !     !    !      ! !       !      !    !
  !        !    !----------!    !     ! !       !-----------!    !
  !        !   !        !   !     !  !     !         !   !
  !        !  !          !  !     !   !   !           !  !---------------
  
  !        !       !!       !     !    !        !!       !
  !        !      !  !      !     !   !        ! !       !
  !        !     !    !     !     !  !        !   !      !
  --------------     !     !    !      ! !       !      !    !
  !        !    !----------!    !     ! !       !-----------!    !
  !        !   !        !   !     !  !     !         !   !
  !        !  !          !  !     !   !   !           !  !---------------
  
  !        !       !!       !     !    !        !!       !
  !        !      !  !      !     !   !        ! !       !
  !        !     !    !     !     !  !        !   !      !
  --------------     !     !    !      ! !       !      !    !
  !        !    !----------!    !     ! !       !-----------!    !
  !        !   !        !   !     !  !     !         !   !
  !        !  !          !  !     !   !   !           !  !---------------

            
                 ♦ SELAMAT MEN SETTING², TAPI KALO ERROR JANGAN KOAR² ♦
><><><><>><><><><>><><><><><><><>><><><><><><><><><><><><><><><>><><<><><><><><><><><><><><>><><><>
*/

require('./config')
const { BufferJSON, WA_DEFAULT_EPHEMERAL, generateWAMessageFromContent, proto, generateWAMessageContent, generateWAMessage, prepareWAMessageMedia, areJidsSameUser, getContentType } = require('@adiwajshing/baileys')
const fs = require('fs')
const util = require('util')
const chalk = require('chalk')
const { exec, spawn, execSync } = require("child_process")
const axios = require('axios')
const path = require('path')
const os = require('os')
const moment = require('moment-timezone')
const speed = require('performance-now')
const { performance } = require('perf_hooks')
const { Primbon } = require('scrape-primbon')
const primbon = new Primbon()
const { smsg, formatp, tanggal, formatDate, getTime, isUrl, sleep, clockString, runtime, fetchJson, getBuffer, jsonformat, format, parseMention, getRandom } = require('./lib/myfunc')
const kalimage = fs.readFileSync ('./poto/haikal.jpg')
const thumbnail = fs.readFileSync ('./poto/haikal.jpg')
const ownername = 'haikal'

// read database
global.db = JSON.parse(fs.readFileSync('./src/database.json'))
if (global.db) global.db = {
sticker: {},
database: {},
game: {},
others: {},
...(global.db || {})
}
let tebaklagu = db.game.tebaklagu = []
let _family100 = db.game.family100 = []
let kuismath = db.game.math = []
let tebakgambar = db.game.tebakgambar = []
let tebakkata = db.game.tebakkata = []
let caklontong = db.game.lontong = []
let caklontong_desk = db.game.lontong_desk = []
let tebakkalimat = db.game.kalimat = []
let tebaklirik = db.game.lirik = []
let tebaktebakan = db.game.tebakan = []
let vote = db.others.vote = []

/*><><><><><><><><><><><><><> MODULE EKSPORTS <>><<>><><>><><><>><>><><<><><><><><>><>><>><>><><
*/
module.exports = hisoka = async (hisoka, m, chatUpdate, store) => {
try {
 var body = (m.mtype === 'conversation') ? m.message.conversation : (m.mtype == 'imageMessage') ? m.message.imageMessage.caption : (m.mtype == 'videoMessage') ? m.message.videoMessage.caption : (m.mtype == 'extendedTextMessage') ? m.message.extendedTextMessage.text : (m.mtype == 'buttonsResponseMessage') ? m.message.buttonsResponseMessage.selectedButtonId : (m.mtype == 'listResponseMessage') ? m.message.listResponseMessage.singleSelectReply.selectedRowId : (m.mtype == 'templateButtonReplyMessage') ? m.message.templateButtonReplyMessage.selectedId : (m.mtype === 'messageContextInfo') ? (m.message.buttonsResponseMessage?.selectedButtonId || m.message.listResponseMessage?.singleSelectReply.selectedRowId || m.text) : ''
var budy = (typeof m.text == 'string' ? m.text : '')
var prefix = prefa ? /^[°•π÷×¶∆£¢€¥®™+✓_=|~!?@#$%^&.©^]/gi.test(body) ? body.match(/^[°•π÷×¶∆£¢€¥®™+✓_=|~!?@#$%^&.©^]/gi)[0] : "" : prefa ?? global.prefix
const salam = moment(Date.now()).tz('Asia/Jakarta').locale('id').format('a')
const isCmd = body.startsWith(prefix)
const from = m.key.remoteJid
const command = body.replace(prefix, '').trim().split(/ +/).shift().toLowerCase()
const args = body.trim().split(/ +/).slice(1)
const pushname = m.pushName || "No Name"
const botNumber = await hisoka.decodeJid(hisoka.user.id)
const isCreator = [botNumber, ...global.owner].map(v => v.replace(/[^0-9]/g, '') + '@s.whatsapp.net').includes(m.sender)
const itsMe = m.sender == botNumber ? true : false
const text = q = args.join(" ")
const quoted = m.quoted ? m.quoted : m
const mime = (quoted.msg || quoted).mimetype || ''
const isMedia = /image|video|sticker|audio/.test(mime)	
// Group
const groupMetadata = m.isGroup ? await hisoka.groupMetadata(m.chat).catch(e => {}) : ''
const groupName = m.isGroup ? groupMetadata.subject : ''
const participants = m.isGroup ? await groupMetadata.participants : ''
const groupAdmins = m.isGroup ? await participants.filter(v => v.admin !== null).map(v => v.id) : ''
const groupOwner = m.isGroup ? groupMetadata.owner : ''
const isBotAdmins = m.isGroup ? groupAdmins.includes(botNumber) : false
const isAdmins = m.isGroup ? groupAdmins.includes(m.sender) : false
// Public & Self
if (!hisoka.public) {
if (!m.key.fromMe) return
}        
const ftroli ={key: {fromMe: false,
"participant":"0@s.whatsapp.net", 
"remoteJid": "6289609927539-1604595598@g.us"},
"message": {orderMessage: 
{itemCount: 2022,
status: 200, 
thumbnail: kalimage, 
surface: 200, message: `© ${ownername}`,
orderTitle: 'Nusantara-BOT',
sellerJid: '0@s.whatsapp.net'}}, 
contextInfo: {"forwardingScore":999,"isForwarded":true},
sendEphemeral: true}    
// Push Message To Console && Auto Read
if (m.message) {
hisoka.sendReadReceipt(m.chat, m.sender, [m.key.id])
console.log(chalk.black(chalk.bgWhite('[ PESAN ]')), chalk.black(chalk.bgGreen(new Date)), chalk.black(chalk.bgBlue(budy || m.mtype)) + '\n' + chalk.magenta('=> Dari'), chalk.green(pushname), chalk.yellow(m.sender) + '\n' + chalk.blueBright('=> Di'), chalk.green(m.isGroup ? pushname : 'Private Chat', m.chat))
}
// write database every 1 minute
setInterval(() => {
fs.writeFileSync('./src/database.json', JSON.stringify(global.db, null, 2))
console.log('Updating Database.. Nakano-Bot-Md')
}, 60 * 1000)
// Respon Cmd with media
if (isMedia && m.msg.fileSha256 && (m.msg.fileSha256.toString('base64') in global.db.sticker)) {
let hash = global.db.sticker[m.msg.fileSha256.toString('base64')]
let { text, mentionedJid } = hash
let messages = await generateWAMessage(m.chat, { text: text, mentions: mentionedJid }, {
userJid: hisoka.user.id,
quoted: m.quoted && m.quoted.fakeObj
})
messages.key.fromMe = areJidsSameUser(m.sender, hisoka.user.id)
messages.key.id = m.key.id
messages.pushName = m.pushName
if (m.isGroup) messages.participant = m.sender
let msg = {
...chatUpdate,
messages: [proto.WebMessageInfo.fromObject(messages)],
type: 'append'
}
hisoka.ev.emit('messages.upsert', msg)
}
if (('family100'+m.chat in _family100) && isCmd) {
kuis = true
let room = _family100['family100'+m.chat]
let teks = budy.toLowerCase().replace(/[^\w\s\-]+/, '')
let isSurender = /^((me)?nyerah|surr?ender)$/i.test(m.text)
if (!isSurender) {
let index = room.jawaban.findIndex(v => v.toLowerCase().replace(/[^\w\s\-]+/, '') === teks)
if (room.terjawab[index]) return !0
room.terjawab[index] = m.sender
}
let isWin = room.terjawab.length === room.terjawab.filter(v => v).length
let caption = `
Jawablah Pertanyaan Berikut :\n${room.soal}\n\n\nTerdapat ${room.jawaban.length} Jawaban ${room.jawaban.find(v => v.includes(' ')) ? `(beberapa Jawaban Terdapat Spasi)` : ''}
${isWin ? `Semua Jawaban Terjawab` : isSurender ? 'Menyerah!' : ''}
${Array.from(room.jawaban, (jawaban, index) => {
return isSurender || room.terjawab[index] ? `(${index + 1}) ${jawaban} ${room.terjawab[index] ? '@' + room.terjawab[index].split('@')[0] : ''}`.trim() : false
}).filter(v => v).join('\n')}
${isSurender ? '' : `Perfect Player`}`.trim()
hisoka.sendText(m.chat, caption, m, { contextInfo: { mentionedJid: parseMention(caption) }}).then(mes => { return _family100['family100'+m.chat].pesan = mesg }).catch(_ => _)
if (isWin || isSurender) delete _family100['family100'+m.chat]
}

if (tebaklagu.hasOwnProperty(m.sender.split('@')[0]) && isCmd) {
kuis = true
jawaban = tebaklagu[m.sender.split('@')[0]]
if (budy.toLowerCase() == jawaban) {
await hisoka.sendButtonText(m.chat, [{ buttonId: 'tebak lagu', buttonText: { displayText: 'Tebak Lagu' }, type: 1 }], `🎮 Tebak Lagu 🎮\n\nJawaban Benar 🎉\n\nIngin bermain lagi? tekan button dibawah`, hisoka.user.name, m)
delete tebaklagu[m.sender.split('@')[0]]
} else m.reply('*Jawaban Salah!*')
}

if (kuismath.hasOwnProperty(m.sender.split('@')[0]) && isCmd) {
kuis = true
jawaban = kuismath[m.sender.split('@')[0]]
if (budy.toLowerCase() == jawaban) {
await m.reply(`🎮 Kuis Matematika  🎮\n\nJawaban Benar 🎉\n\nIngin bermain lagi? kirim ${prefix}math mode`)
delete kuismath[m.sender.split('@')[0]]
} else m.reply('*Jawaban Salah!*')
}

if (tebakgambar.hasOwnProperty(m.sender.split('@')[0]) && isCmd) {
kuis = true
jawaban = tebakgambar[m.sender.split('@')[0]]
if (budy.toLowerCase() == jawaban) {
await hisoka.sendButtonText(m.chat, [{ buttonId: 'tebak gambar', buttonText: { displayText: 'Tebak Gambar' }, type: 1 }], `🎮 Tebak Gambar 🎮\n\nJawaban Benar 🎉\n\nIngin bermain lagi? tekan button dibawah`, hisoka.user.name, m)
delete tebakgambar[m.sender.split('@')[0]]
} else m.reply('*Jawaban Salah!*')
}

if (tebakkata.hasOwnProperty(m.sender.split('@')[0]) && isCmd) {
kuis = true
jawaban = tebakkata[m.sender.split('@')[0]]
if (budy.toLowerCase() == jawaban) {
await hisoka.sendButtonText(m.chat, [{ buttonId: 'tebak kata', buttonText: { displayText: 'Tebak Kata' }, type: 1 }], `🎮 Tebak Kata 🎮\n\nJawaban Benar 🎉\n\nIngin bermain lagi? tekan button dibawah`, hisoka.user.name, m)
delete tebakkata[m.sender.split('@')[0]]
} else m.reply('*Jawaban Salah!*')
}

if (caklontong.hasOwnProperty(m.sender.split('@')[0]) && isCmd) {
kuis = true
jawaban = caklontong[m.sender.split('@')[0]]
deskripsi = caklontong_desk[m.sender.split('@')[0]]
if (budy.toLowerCase() == jawaban) {
await hisoka.sendButtonText(m.chat, [{ buttonId: 'tebak lontong', buttonText: { displayText: 'Tebak Lontong' }, type: 1 }], `🎮 Cak Lontong 🎮\n\nJawaban Benar 🎉\n*${deskripsi}*\n\nIngin bermain lagi? tekan button dibawah`, hisoka.user.name, m)
delete caklontong[m.sender.split('@')[0]]
delete caklontong_desk[m.sender.split('@')[0]]
} else m.reply('*Jawaban Salah!*')
}

if (tebakkalimat.hasOwnProperty(m.sender.split('@')[0]) && isCmd) {
kuis = true
jawaban = tebakkalimat[m.sender.split('@')[0]]
if (budy.toLowerCase() == jawaban) {
await hisoka.sendButtonText(m.chat, [{ buttonId: 'tebak kalimat', buttonText: { displayText: 'Tebak Kalimat' }, type: 1 }], `🎮 Tebak Kalimat 🎮\n\nJawaban Benar 🎉\n\nIngin bermain lagi? tekan button dibawah`, hisoka.user.name, m)
delete tebakkalimat[m.sender.split('@')[0]]
} else m.reply('*Jawaban Salah!*')
}

if (tebaklirik.hasOwnProperty(m.sender.split('@')[0]) && isCmd) {
kuis = true
jawaban = tebaklirik[m.sender.split('@')[0]]
if (budy.toLowerCase() == jawaban) {
await hisoka.sendButtonText(m.chat, [{ buttonId: 'tebak lirik', buttonText: { displayText: 'Tebak Lirik' }, type: 1 }], `🎮 Tebak Lirik 🎮\n\nJawaban Benar 🎉\n\nIngin bermain lagi? tekan button dibawah`, hisoka.user.name, m)
delete tebaklirik[m.sender.split('@')[0]]
} else m.reply('*Jawaban Salah!*')
}
	    
if (tebaktebakan.hasOwnProperty(m.sender.split('@')[0]) && isCmd) {
kuis = true
jawaban = tebaktebakan[m.sender.split('@')[0]]
if (budy.toLowerCase() == jawaban) {
await hisoka.sendButtonText(m.chat, [{ buttonId: 'tebak tebakan', buttonText: { displayText: 'Tebak Tebakan' }, type: 1 }], `🎮 Tebak Tebakan 🎮\n\nJawaban Benar 🎉\n\nIngin bermain lagi? tekan button dibawah`, hisoka.user.name, m)
delete tebaktebakan[m.sender.split('@')[0]]
} else m.reply('*Jawaban Salah!*')
}
        
//━━━━━━━━━━━━━━━[ JAM ]━━━━━━━━━━━━━━━━━//

const hour_now = moment().format('HH')
var ucapanWaktu = '𝐒𝐞𝐥𝐚𝐦𝐚𝐭 𝐏𝐚𝐠𝐢 🌄'
if (hour_now >= '03' && hour_now <= '10') {
ucapanWaktu = '𝐒𝐞𝐥𝐚𝐦𝐚𝐭 𝐒𝐢𝐚𝐧𝐠 🌅'
} else if (hour_now >= '10' && hour_now <= '14') {
ucapanWaktu = '𝐒𝐞𝐥𝐚𝐦𝐚𝐭 𝐒𝐢𝐚𝐧𝐠 🌞'
} else if (hour_now >= '14' && hour_now <= '17') {
ucapanWaktu = '𝐒𝐞𝐥𝐚𝐦𝐚𝐭 𝐒𝐨𝐫𝐞 ☀️'
} else if (hour_now >= '17' && hour_now <= '18') {
ucapanWaktu = '𝐒𝐞𝐥𝐚𝐦𝐚𝐭 𝐌𝐚𝐥𝐚𝐦 🌠'
} else if (hour_now >= '18' && hour_now <= '23') {
ucapanWaktu = '𝐒𝐞𝐥𝐚𝐦𝐚𝐭 𝐌𝐚𝐥𝐚𝐦 🌌'
} else {
ucapanWaktu = '𝐒𝐞𝐥𝐚𝐦𝐚𝐭 𝐌𝐚𝐥𝐚𝐦'//'Selamat Malam!'
}

const time = moment.tz('Asia/Jakarta').format('DD/MM HH:mm:ss')
const wib = moment.tz('Asia/Jakarta').format('HH : mm : ss')
const wita = moment.tz('Asia/Makassar').format('HH : mm : ss')
const wit = moment.tz('Asia/Jayapura').format('HH : mm : ss')


//var groups = fazd.chats.array.filter(v => v.jid.endsWith('g.us'))
//var private = fazd.chats.array.filter(v => v.jid.endsWith('s.whatsapp.net'))
let locale = "id";
let d = new Date();
let gmt = new Date(0).getTime() - new Date('1 Januari 2021').getTime()
const weton = ['Pahing', 'Pon','Wage','Kliwon','Legi'][Math.floor(((d * 1) + gmt) / 84600000) % 5]
let dateIslamic = Intl.DateTimeFormat(locale + '-TN-u-ca-islamic', {
day: 'numeric',
month: 'long',
year: 'numeric'
}).format(d);
let week = d.toLocaleDateString(locale, { weekday: "long" });
let date = d.toLocaleDateString(locale, {
day: "numeric",
month: "long",
year: "numeric",
});
    

        
//TicTacToe
this.game = this.game ? this.game : {}
let room = Object.values(this.game).find(room => room.id && room.game && room.state && room.id.startsWith('tictactoe') && [room.game.playerX, room.game.playerO].includes(m.sender) && room.state == 'PLAYING')
if (room) {
let ok
let isWin = !1
let isTie = !1
let isSurrender = !1
// m.reply(`[DEBUG]\n${parseInt(m.text)}`)
if (!/^([1-9]|(me)?nyerah|surr?ender|off|skip)$/i.test(m.text)) return
isSurrender = !/^[1-9]$/.test(m.text)
	    if (m.sender !== room.game.currentTurn) { // nek wayahku
	    if (!isSurrender) return !0
	    }
	    if (!isSurrender && 1 > (ok = room.game.turn(m.sender === room.game.playerO, parseInt(m.text) - 1))) {
	    m.reply({
	    '-3': 'Game telah berakhir',
	    '-2': 'Invalid',
	    '-1': 'Posisi Invalid',
	    0: 'Posisi Invalid',
	    }[ok])
	    return !0
	    }
	    if (m.sender === room.game.winner) isWin = true
	    else if (room.game.board === 511) isTie = true
	    let arr = room.game.render().map(v => {
	    return {
	    X: '❌',
	    O: '⭕',
	    1: '1️⃣',
	    2: '2️⃣',
	    3: '3️⃣',
	    4: '4️⃣',
	    5: '5️⃣',
	    6: '6️⃣',
	    7: '7️⃣',
	    8: '8️⃣',
	    9: '9️⃣',
	    }[v]
	    })
	    if (isSurrender) {
	    room.game._currentTurn = m.sender === room.game.playerX
	    isWin = true
	    }
	    let winner = isSurrender ? room.game.currentTurn : room.game.winner
	    let str = `Room ID: ${room.id}

${arr.slice(0, 3).join('')}
${arr.slice(3, 6).join('')}
${arr.slice(6).join('')}

${isWin ? `@${winner.split('@')[0]} Menang!` : isTie ? `Game berakhir` : `Giliran ${['❌', '⭕'][1 * room.game._currentTurn]} (@${room.game.currentTurn.split('@')[0]})`}
❌: @${room.game.playerX.split('@')[0]}
⭕: @${room.game.playerO.split('@')[0]}

Ketik *nyerah* untuk menyerah dan mengakui kekalahan`
	    if ((room.game._currentTurn ^ isSurrender ? room.x : room.o) !== m.chat)
	    room[room.game._currentTurn ^ isSurrender ? 'x' : 'o'] = m.chat
	    if (room.x !== room.o) await hisoka.sendText(room.x, str, m, { mentions: parseMention(str) } )
	    await hisoka.sendText(room.o, str, m, { mentions: parseMention(str) } )
	    if (isTie || isWin) {
	    delete this.game[room.id]
	    }
	    }

        //Suit PvP
	    this.suit = this.suit ? this.suit : {}
	    let roof = Object.values(this.suit).find(roof => roof.id && roof.status && [roof.p, roof.p2].includes(m.sender))
	    if (roof) {
	    let win = ''
	    let tie = false
	    if (m.sender == roof.p2 && /^(acc(ept)?|terima|gas|oke?|tolak|gamau|nanti|ga(k.)?bisa|y)/i.test(m.text) && m.isGroup && roof.status == 'wait') {
	    if (/^(tolak|gamau|nanti|n|ga(k.)?bisa)/i.test(m.text)) {
	    hisoka.sendTextWithMentions(m.chat, `@${roof.p2.split`@`[0]} menolak suit, suit dibatalkan`, m)
	    delete this.suit[roof.id]
	    return !0
	    }
	    roof.status = 'play'
	    roof.asal = m.chat
	    clearTimeout(roof.waktu)
	    //delete roof[roof.id].waktu
	    hisoka.sendText(m.chat, `Suit telah dikirimkan ke chat

@${roof.p.split`@`[0]} dan 
@${roof.p2.split`@`[0]}

Silahkan pilih suit di chat masing"
klik https://wa.me/${botNumber.split`@`[0]}`, m, { mentions: [roof.p, roof.p2] })
	    if (!roof.pilih) hisoka.sendText(roof.p, `Silahkan pilih \n\nBatu🗿\nKertas📄\nGunting✂️`, m)
	    if (!roof.pilih2) hisoka.sendText(roof.p2, `Silahkan pilih \n\nBatu🗿\nKertas📄\nGunting✂️`, m)
	    roof.waktu_milih = setTimeout(() => {
	    if (!roof.pilih && !roof.pilih2) hisoka.sendText(m.chat, `Kedua pemain tidak niat main,\nSuit dibatalkan`)
	    else if (!roof.pilih || !roof.pilih2) {
	    win = !roof.pilih ? roof.p2 : roof.p
	    hisoka.sendTextWithMentions(m.chat, `@${(roof.pilih ? roof.p2 : roof.p).split`@`[0]} tidak memilih suit, game berakhir`, m)
	    }
	    delete this.suit[roof.id]
	    return !0
	    }, roof.timeout)
	    }
	    let jwb = m.sender == roof.p
	    let jwb2 = m.sender == roof.p2
	    let g = /gunting/i
	    let b = /batu/i
	    let k = /kertas/i
	    let reg = /^(gunting|batu|kertas)/i
	    if (jwb && reg.test(m.text) && !roof.pilih && !m.isGroup) {
	    roof.pilih = reg.exec(m.text.toLowerCase())[0]
	    roof.text = m.text
	    m.reply(`Kamu telah memilih ${m.text} ${!roof.pilih2 ? `\n\nMenunggu lawan memilih` : ''}`)
	    if (!roof.pilih2) hisoka.sendText(roof.p2, '_Lawan sudah memilih_\nSekarang giliran kamu', 0)
	    }
	    if (jwb2 && reg.test(m.text) && !roof.pilih2 && !m.isGroup) {
	    roof.pilih2 = reg.exec(m.text.toLowerCase())[0]
	    roof.text2 = m.text
	    m.reply(`Kamu telah memilih ${m.text} ${!roof.pilih ? `\n\nMenunggu lawan memilih` : ''}`)
	    if (!roof.pilih) hisoka.sendText(roof.p, '_Lawan sudah memilih_\nSekarang giliran kamu', 0)
	    }
	    let stage = roof.pilih
	    let stage2 = roof.pilih2
	    if (roof.pilih && roof.pilih2) {
	    clearTimeout(roof.waktu_milih)
	    if (b.test(stage) && g.test(stage2)) win = roof.p
	    else if (b.test(stage) && k.test(stage2)) win = roof.p2
	    else if (g.test(stage) && k.test(stage2)) win = roof.p
	    else if (g.test(stage) && b.test(stage2)) win = roof.p2
	    else if (k.test(stage) && b.test(stage2)) win = roof.p
	    else if (k.test(stage) && g.test(stage2)) win = roof.p2
	    else if (stage == stage2) tie = true
	    hisoka.sendText(roof.asal, `_*Hasil Suit*_${tie ? '\nSERI' : ''}

@${roof.p.split`@`[0]} (${roof.text}) ${tie ? '' : roof.p == win ? ` Menang \n` : ` Kalah \n`}
@${roof.p2.split`@`[0]} (${roof.text2}) ${tie ? '' : roof.p2 == win ? ` Menang \n` : ` Kalah \n`}
`.trim(), m, { mentions: [roof.p, roof.p2] })
	    delete this.suit[roof.id]
	    }
	    }
        switch(command) {
        
            case 'owner': case 'creator': {
                hisoka.sendContact(m.chat, global.owner, m)
            }
            break
case 'menu': {
m.reply(mess.wait)
m.reply('```PROSESS```')
m.reply('```MENAMPILKAN MENU```')
anu = `
Hai ${pushname} ${tampilUcapan}
Ini adalah List Fitur (Menu)
*SELAMAT MENCOBA 🙏*

✅ = *Works fine*
❌ = *In trouble*

_Hai Sobat, Apakah Kamu Udah Tersenyum Hari ini? 😳_ 
*#jangan Lupa Senyum*

*List Menu*

*Anonymous Menu*
• _${prefix}anonymous_ ✅
• _${prefix}start_ ✅
• _${prefix}next_ ✅
• _${prefix}keluar_ ✅
• _${prefix}sendkontak_ ✅
• _${prefix}menfess_ ✅

•${week} ${date}\n•${dateIslamic}*`
    let message = await prepareWAMessageMedia({ image: fs.readFileSync('./poto/haikal.jpg') }, { upload: hisoka.waUploadToServer })
                const template = generateWAMessageFromContent(m.chat, proto.Message.fromObject({
                    templateMessage: {
                        hydratedTemplate: {
                            imageMessage: message.imageMessage,
                            hydratedContentText: anu,
                            hydratedFooterText: `•${week} ${date}\n•${dateIslamic}`,
                            hydratedButtons: [{
urlButton: 
{
  displayText: 'Web-RunBot 🌐',
   url: 'https://heroku.app.com'
    }
     },
{
  quickReplyButton: {
   displayText: 'Owner Contact 📱',
    id: 'owner'
     }  
      }, 
{
  quickReplyButton: {
   displayText: 'Menu 📖',
    id: 'menu'
}
                            }]
                        }
                    }
                }), { userJid: m.chat, quoted: m })
                hisoka.relayMessage(m.chat, template.message, { messageId: template.key.id })
            }
            break
            
case 'home':
case 'dashboard':{
anu = `
m.reply(mess.wait)
m.reply('```MENAMPILKAN HALAMAN```')
Hai ${pushname} ${tampilUcapan}
Ini adalah Bot *Multidevice*

• Wib : ${wib}
• Wita : ${wita}
• Wit : ${wit}

◎ Server Run : *https://Heroku.app.com*
◎ Daabase Bot : *Database DikaArdnt ( Hisoka-Morou )*
◎ Device : *Xiaomi Redmi Note 2*
◎ Ram Internal : *2/16GB ( 1,06Gb/2,00GB )*
◎ Android Version : *5.0.1 (Lolipop)*
◎ MIUI Version : *MIUI Global 9.6 | Stabil 9.6.3(LHMMIFD)*
◎ CPU : *Octa-core Max 1,95GHz*
◎ Chipset : *MEDIATEK X10 (MTK)*
◎ Lib : _() Baileys - Multi-Device_
◎ Terbit : *2022*

Thank You To ✨ :
• Allah Swt
• Ortu√
• DikaArdnt√
• Baileys√
• Adiwajshing√
• Kahfz√
• ArifiRazzaQ√
• Fadz√
• Lord Ridho√
• Zeeone Ofc√

Bot ini masi dalam tahap pengembangan
jadi maaf jika masi banyak fitur yang error

*PILIH BUTTONNYA KAK*
`
let message = await prepareWAMessageMedia
({ 
image: fs.readFileSync('./poto/haikal.jpg') 
}, 
{ 
upload: hisoka.waUploadToServer 
})
const template = generateWAMessageFromContent(m.chat, proto.Message.fromObject({
templateMessage: {
hydratedTemplate: {
imageMessage: message.imageMessage,
hydratedContentText: anu,
hydratedFooterText: `•${week} ${date}\n•${dateIslamic}`,
hydratedButtons: [{
urlButton: 
{
  displayText: 'Web-RunBot 🌐',
   url: 'https://heroku.app.com'
    }
     },
{
  quickReplyButton: {
   displayText: 'Owner Contact 📱',
    id: 'owner'
     }  
      }, 
{
  quickReplyButton: {
   displayText: 'Menu 📖',
    id: 'menu'
}
}]
}
}
}), 
{ 
userJid: m.chat, quoted: m 
})
hisoka.relayMessage(m.chat, template.message, 
{ 
messageId: template.key.id 
})
}
break
            
case 'anonymous': {
if (m.isGroup) return m.reply('Command Tidak bisa Jika di Dalam Group!')
this.anonymous = this.anonymous ? this.anonymous : {}
let buttons = 
[
       { 
         buttonId: 'start', 
           buttonText: 
            { 
             displayText: 'Start' 
              }, 
               type: 1 
                }
]

hisoka.sendButtonText(m.chat, buttons,`Hi ${await hisoka.getName(m.sender)} Ini adalah Anonymous Chat\n\nKlik Button Dibawah Ini Untuk Mencari Partner`, hisoka.user.name, m)
}
break

case 'mulai': case 'start': {
if (m.isGroup) return m.reply('Command Tidak bisa Jika di Dalam Group!')
this.anonymous = this.anonymous ? this.anonymous : {}
if (Object.values(this.anonymous).find(room => room.check(m.sender))) {
let buttons = 
[
       { 
         buttonId: 'keluar', 
           buttonText: 
            { 
             displayText: 'Stop' 
              }, 
               type: 1 
                }
]

await hisoka.sendButtonText(m.chat, buttons, `\`\`\`Kamu Masih Berada Di dalam Sesi Anonymous, Tekan Button Dibawah Ini Untuk Menghentikan Sesi Anonymous Anda\`\`\``, hisoka.user.name, m)
throw false
}
let room = Object.values(this.anonymous).find(room => room.state === 'WAITING' && !room.check(m.sender))
if (room) {
let buttons = 
[
   { 
    buttonId: 'next', 
     buttonText: 
      { 
       displayText: 'Skip' 
        }, 
         type: 1 
          },
     { 
      buttonId: 'keluar', 
       buttonText: 
        { 
         displayText: 'Stop' 
          }, type: 1 
           }
]
                   
await hisoka.sendButtonText(room.a, buttons, `\`\`\`Berhasil Menemukan Partner, sekarang kamu dapat mengirim pesan\`\`\``, hisoka.user.name, m)
room.b = m.sender
room.state = 'CHATTING'
await hisoka.sendButtonText(room.b, buttons, `\`\`\`Berhasil Menemukan Partner, sekarang kamu dapat mengirim pesan\`\`\``, hisoka.user.name, m)
} else {
let id = + new Date
this.anonymous[id] = {
id,
a: m.sender,
b: '',
state: 'WAITING',
check: function (who = '') {
return [this.a, this.b].includes(who)
},
other: function (who = '') {
return who === this.a ? this.b : who === this.b ? this.a : ''
},
}
let buttons = 
[
     { 
      buttonId: 'keluar', 
       buttonText: 
        { 
         displayText: 'Stop' 
          }, 
           type: 1 
            }
]

await hisoka.sendButtonText(m.chat, buttons, `\`\`\`Mohon Tunggu Sedang Mencari Partner\`\`\``, hisoka.user.name, m)
}
break
}

case 'next': {
if (m.isGroup) return m.reply('Command Tidak bisa Jika di Dalam Group!')
this.anonymous = this.anonymous ? this.anonymous : {}
let romeo = Object.values(this.anonymous).find(room => room.check(m.sender))
if (!romeo) {
let buttons = 
[
       { 
         buttonId: 'keluar', 
           buttonText: 
            { 
             displayText: 'Stop' 
              }, 
               type: 1 
                }
]

await hisoka.sendButtonText(m.chat, buttons, `\`\`\`Kamu Sedang Tidak Berada Di Sesi Anonymous, Tekan Button Untuk Mencari Partner\`\`\``)
throw false
}
let other = romeo.other(m.sender)
if (other) await hisoka.sendText(other, `\`\`\`Partner Telah Meninggalkan Sesi Anonymous\`\`\``, m)
delete this.anonymous[romeo.id]
let room = Object.values(this.anonymous).find(room => room.state === 'WAITING' && !room.check(m.sender))
if (room) {
let buttons =
[
   { 
    buttonId: 'next', 
     buttonText: 
      { 
       displayText: 'Skip' 
        }, 
         type: 1 
          },
     { 
      buttonId: 'keluar', 
       buttonText: 
        { 
         displayText: 'Stop' 
          }, type: 1 
           }
]
                    
await hisoka.sendButtonText(room.a, buttons, `\`\`\`Berhasil Menemukan Partner, sekarang kamu dapat mengirim pesan\`\`\``, hisoka.user.name, m)
room.b = m.sender
room.state = 'CHATTING'
await hisoka.sendButtonText(room.b, buttons, `\`\`\`Berhasil Menemukan Partner, sekarang kamu dapat mengirim pesan\`\`\``, hisoka.user.name, m)
} else {
let id = + new Date
this.anonymous[id] = {
id,
a: m.sender,
b: '',
state: 'WAITING',
check: function (who = '') {
return [this.a, this.b].includes(who)
},
other: function (who = '') {
return who === this.a ? this.b : who === this.b ? this.a : ''
},
}
let buttons = 
[
     { 
      buttonId: 'keluar', 
       buttonText: 
        { 
         displayText: 'Stop' 
          }, 
           type: 1 
            }
]

await hisoka.sendButtonText(m.chat, buttons, `\`\`\`Mohon Tunggu Sedang Mencari Partner\`\`\``, ikall.user.name, m)
}
break
}

case  'menfess':
case 'pesanrahasia':{
if (args.length < 1) return m.reply(`Penggunaan ${prefix}menfess 62xnxx|dari siapa|pesan rahasia`)
if (args[0].startsWith('08')) return m.reply('Awali nomor dengan 62') 
var nomor = q.split("|")[0].replace(new RegExp("[()+-/ +/]", "gi"), "") 
var org = q.split("|")[1];
var dari = q.split("|")[2];
var pesan = `hai, kamu dapet pesan rahasia nihh\n\ndari: *${org}* \nIsi pesan: \n "${dari}"`
let buttons = 
[

  {
   "buttonId": `${prefix}mulai ${pushmame}`,
    "buttonText": 
     {"displayText": `ngobrol dengan dia secara anonymous`},
      "type": "RESPONSE"
        }
]

ikall.sendMessage(nomor+'@s.whatsapp.net', {text: pesan, buttons})   
m.reply(`Sukses mengirim pesan rahasia:\n${pesan} ke nomer ${nomor}`)
}
break
            


//><><><><><><>><><><><><><><><><><>><><><><><><><><><><><><><><><><><><><><><><>><><><><><><><><><.
/*//========================[ PEMBATAS ]=================================================\\==\\=====================================================================================//
*/ //><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><     


      
default:
if (budy.startsWith('=>')) {
if (!isCreator) return m.reply(mess.owner)
function Return(sul) {
sat = JSON.stringify(sul, null, 2)
bang = util.format(sat)
if (sat == undefined) {
bang = util.format(sul)
}
return m.reply(bang)
}
try {
m.reply(util.format(eval(`(async () => { return ${budy.slice(3)} })()`)))
} catch (e) {
m.reply(String(e))
}
}

if (budy.startsWith('>')) {
if (!isCreator) return m.reply(mess.owner)
try {
let evaled = await eval(budy.slice(2))
if (typeof evaled !== 'string') evaled = require('util').inspect(evaled)
await m.reply(evaled)
} catch (err) {
await m.reply(String(err))
}
}

if (budy.startsWith('$')) {
if (!isCreator) return m.reply(mess.owner)
exec(budy.slice(2), (err, stdout) => {
if(err) return m.reply(err)
if (stdout) return m.reply(stdout)
})
}
if (m.chat.endsWith('@s.whatsapp.net') && isCmd) {
this.anonymous = this.anonymous ? this.anonymous : {}
let room = Object.values(this.anonymous).find(room => [room.a, room.b].includes(m.sender) && room.state === 'CHATTING')
if (room) {
if (/^.*(next|leave|start)/.test(m.text)) return
if (['.next', '.leave', '.stop', '.start', 'Cari Partner', 'Keluar', 'Lanjut', 'Stop'].includes(m.text)) return
let other = [room.a, room.b].find(user => user !== m.sender)
m.copyNForward(other, true, m.quoted && m.quoted.fromMe ? {
contextInfo: {
...m.msg.contextInfo,
forwardingScore: 0,
isForwarded: true,
participant: other
}
} : {})
}
return !0
}
if (isCmd && budy.toLowerCase() != undefined) {
if (m.chat.endsWith('broadcast')) return
if (m.isBaileys) return
let msgs = global.db.database
if (!(budy.toLowerCase() in msgs)) return
hisoka.copyNForward(m.chat, msgs[budy.toLowerCase()], true)
}
}
} catch (err) {
m.reply(util.format(err))
}
}
let file = require.resolve(__filename)
fs.watchFile(file, () => {
fs.unwatchFile(file)
console.log(chalk.redBright(`Update ${__filename}`))
delete require.cache[file]
require(file)
})